{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/comments.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="comments-header">
        <h1 class="page-title">–û—Ç–∑—ã–≤—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h1>
        <p class="page-subtitle">–ß—Ç–æ –¥—É–º–∞—é—Ç —á–∏—Ç–∞—Ç–µ–ª–∏ –æ –Ω–∞—à–µ–º –±–ª–æ–≥–µ</p>

        <div class="add-comment-btn">
            <a href="#add-comment" class="btn">–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</a>
        </div>
    </div>

    <section class="comments-section">
        <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</h2>

        {% if comments %}
        <div class="comments-list">
            {% for comment in comments %}
            <article class="comment-card">
                <div class="comment-header">
                    <div class="comment-author">
                        <div class="author-avatar">
                            {% if comment.author.profile.avatar %}
                                <img src="{{ comment.author.profile.avatar.url }}">
                            {% endif %}
                        </div>
                        <div class="author-info">
                            <h3 class="author-name">
                                {% if comment.fio %}
                                    {{ comment.fio }}
                                {% endif %}
                            </h3>
                            <span class="comment-date">{{ comment.created_at }}</span>
                        </div>
                    </div>
                </div>

                <div class="comment-body">
                    <p class="comment-text">{{ comment.text }}</p>
                </div>
            </article>
            {% endfor %}
        </div>
        {% else %}
        <div class="no-comments">
            <div class="no-comments-icon">üí¨</div>
            <h3>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤</h3>
            <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π!</p>
            <a href="#add-comment" class="btn btn-primary">–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤</a>
        </div>
        {% endif %}
    </section>

    <section id="add-comment" class="add-comment-section">
        <h2 class="section-title">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h2>

        <form class="comment-form" method="POST" action="{% url 'comments' post_id %}">
            {% csrf_token %}
            <div class="form-group">
                <label for="fio" class="form-label">–í–∞—à–µ –∏–º—è</label>
                <input type="text" id="fio" name="fio" class="form-input" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?" required>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="email" class="form-input" placeholder="–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏" required>
            </div>

            <div class="form-group">
                <label for="comment-text" class="form-label">–í–∞—à –æ—Ç–∑—ã–≤</label>
                <textarea id="comment-text" name="text" class="form-textarea" rows="5"
                          placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏–ª–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏..." required></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                <button type="reset" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </form>
    </section>
</div>
{% endblock %}